ENUNCIADO:

1) Refaça o programa anterior para que cada caractere seja enviado
em intervalos de 640 ciclos de instrução  (clock do cristal/12).


RESET 	EQU 0H
ITMR0 	EQU 0BH
STATE 	EQU 20H

		ORG RESET
		JMP INICIO
		
		ORG ITMR0 ;LOCAL DO TRATADOR DA INTERRUPÇÃO TIMER0
		MOV TH0, #0FDH ;RECARGA DOS VALORES DE TL E TH PARA FUTURAS INTERRUPCOES
		MOV TL0, #080H ;SEMPRE FAZER ISSO PARA OS MODOS 0, 1 E 3
		MOV STATE, #1H
		RETI
		
INICIO: MOV IE, #10000010B ;HABILITAR INTERRUPCAO TIMER0 E ENEBLE ALL
		MOV TMOD, #01H ;MODO 1 DO TIMER 0 TEMPORIZADOR E GATE = '0'
		MOV TH0, #0FDH ; VALORES PARA CONTAR
		MOV TL0, #080H ;2^16 - NUMERO DE CICLOS
		MOV STATE, #0H 
		MOV R0, #STATE
		MOV DPTR, #TABELA
		MOV R1, #0
		SETB TR0 ;DISPARAR O CONTADOR/TEMPORIZADOR

VOLTA:	CJNE @R0, #1, VOLTA
		MOV STATE, #0H
		MOV A, R1
		MOVC A, @A+DPTR
		MOV P1, A
		INC R1
		CJNE R1, #16, VOLTA
		CLR TR0 ;LIMPAR PARA PODER CONTAR NOVAMENTE
		JMP $

TABELA: DB 'Microcontrolador'
		END
		
