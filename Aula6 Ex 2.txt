ENUNCIADO:

2) Refaça o programa anterior, utilizando o timer1 no modo0, para que cada 
caractere seja enviado em intervalos de 640 ciclos de instrução (clock cristal
1/12).



RESET 	EQU 0H
ITMR1 	EQU 1BH
STATE 	EQU 20H

		ORG RESET
		JMP INICIO
		
		ORG ITMR1 ;LOCAL DO TRATADOR DA INTERRUPÇÃO TIMER1
		MOV TH1, #0ECH ;RECARGA DOS VALORES DE TL E TH PARA FUTURAS INTERRUPCOES
		MOV TL1, #0H ;SEMPRE FAZER ISSO PARA OS MODOS 0, 1 E 3
		MOV STATE, #1H
		RETI
		
INICIO: MOV IE, #10001000B ;HABILITAR INTERRUPCAO TIMER0 E ENEBLE ALL
		MOV TMOD, #00H ;MODO 1 DO TIMER 0 TEMPORIZADOR E GATE = '0'
		MOV TH1, #0ECH ; VALORES PARA CONTAR
		MOV TL1, #0H ;256 - 640/32 = 236 (20 ciclos em th1), tl1 vai contar até 32;
		MOV STATE, #0H 
		MOV R0, #STATE
		MOV DPTR, #TABELA
		MOV R1, #0
		SETB TR1 ;DISPARAR O CONTADOR/TEMPORIZADOR

VOLTA:	CJNE @R0, #1, VOLTA
		MOV STATE, #0H
		MOV A, R1
		MOVC A, @A+DPTR
		MOV P1, A
		INC R1
		CJNE R1, #16, VOLTA
		CLR TR1 ;LIMPAR PARA PODER CONTAR NOVAMENTE
		JMP $

TABELA: DB 'Microcontrolador'
		END
		