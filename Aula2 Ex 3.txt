INACABADO!


;Programa ADDVECT.asm
RESET 	EQU 0H ;POSIÇÃO DE MEMÓRIA QUE COMEÇA MEU PROGRAMA
VETOR 	EQU 60H ;POSIÇÃO DE MEMORIA DE CODIGO QUE COMEÇA O VETOR
		ORG RESET ;PC = 0000H QUANDO RESETAR O 8051
		MOV DPTR, #NRO ;ENDERECO DO NUM DE PARCELAS QUE SOMAREMOS
		MOV A, #0 ;ZERA O ACUMULADOR
		MOVC A, @A+DPTR ;PASSA O CONTEUDO DO ENDERECO (NRO) QUE É 3, ISTO É PASSA O NUMERO DE PARCELAS
		JZ FIM 
		MOV R1, A ;JOGA O VALOR DO A EM R1 (NUMERO DE PARCELAS)
		MOV DPTR, #DADOS ;PASSA O ENDERECO DE DADOS PARA DPTR
		MOV R2, #0 ;VAI GUARDAR RESULTADO DAS SOMAS
		MOV R0, #0 ;ESPECIFICA PARCELA A SER LIDA
		MOV R3, 0
VOLTA:	MOV A, R0 ;A = 0
		MOVC A, @A+DPTR ;RECEBE O CONTEUDO DO ENDEREÇO DE A+DPTR
		ADD A, R2 ;A=A+R2
		MOV R2, A 
		MOV A, #0
		ADDC A, R3
		MOV R3, A
		JNZ MEM
		INC R0 ;INCREMENTA R0
		DJNZ R1, VOLTA ;DECREMENTA R1 SE NÃO FOR ZERO E PULA P VOLTA
		MOV A, R2 ;GUARDA O VALOR DE A EM R2 (TOTAL DA SOMA)
		MOV DPTR, #0000H ;FAZ MEU "PONTEIRO" APONTAR PARA A POSIÇÃO 0001H DA MEMÓRIA RAM EXTERNA
		MOVX @DPTR, A ;PASSA O VALOR DE A PARA A POSIÇÃO DE MEMÓRIA APONTADA PELO DPTR (X:01H)
MEM:	MOV A, R2 ;PEGAR BYTE MAIS SIGNIFICATIVO E JOGAR NA POSIÇÃO X01H
FIM:	JMP FIM

ORG VETOR ;ORIGEM DO VETOR POSIÇÃO 60H DA MEMORIA ROM (C:60H)
		NRO: 	DB 09H ;NUMERO DE PARCELAS C:61H
		DADOS: 	DB 09H, 03H, 05H, 06H, 0AH, 0E2H ;NUMEROS GUARDADOS NAS POSIÇÕES DE MEMÓRIA SEGUINTES C:62H ...
		END