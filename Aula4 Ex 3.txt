Enunciado:
3) Faça um programa que aceite /INT0 e /INT1 (acionadas por
borda). Quando /INT0 for solicitada, escrever na porta p1,
a cadeia de caracteres 'Microcontrolador', caractere por
caractere, a cada chamada de interrupção. Re-iniciar a escri-
ta ao chegar ao final da cadeia de caracteres. Quando /INT1
for solicitada, ler dado da porta P1 e armazene na memória
externa a partir do endereço 2000H até 200FH. Ou seja, a cada
interrupção, preencher um byte desta região de memória. 
Quando chegar ao final do preenchimento desta região de 
memória, re-iniciar. Utilizar registradores do banco 1. 



RESET 		EQU 00H
ITINT0		EQU 03H ;LOCAL DO TRATADOR EXT0
ITINT1 		EQU 13H ;LOCAL DO TRATADOR EXT1
STATE1		EQU 20H 
	
			ORG	RESET ;PC='0' DPS DO RESET
			JMP INICIO
		
			ORG ITINT0 ;LOCAL DO TRATADOR DE INTERRUPÇÃO EX0
			JMP HANDLER
		
			ORG ITINT1 ;LOCAL DO TRATADOR DE INTERRUPÇÃO EX1
			JMP HANDLER2
				
INICIO: 	MOV IE, #10000101B ;HABILITA INT0 (EX0) E INT1 (EX1)
			SETB IT0 ;BORDA DESCIDA IT0='1'
			SETB IT1 ;BORDA DESCIDA IT='1'
			SETB RS0 ;SETAR RS0 E LIMPAR RS1 PARA USAR O BANCO 1 DE REGISTRADOR
			CLR RS1 ;RS1RSO = '01' USAR BANCO 1 DE REGISTRADORES
			MOV SP, #10H ;ALTERAR O COMEÇO DA PILHA PARA NÃO HAVER SOBREPOSIÇÃO DE DADO
			MOV STATE1, #00H ;STATE1 POSIÇÃO DE MEMÓRIA Q IREMOS COMPARAR O R0
			MOV R0, #STATE1 ;R0 RECEBE O VALOR 20H
			MOV DPTR, #TABELA ;DPTR APONTA PARA TABELA PARA ESCREVER EM P1
			MOV R1, #00H 
			MOV R2, #00H
ESCREVEP:	CJNE @R0, #1, ESCREVEP ;FICA PRESO NESSA LINHA ATÉ ACONTECER UMA INTERRUPÇÃO
			MOV STATE1, #00H 
			MOV A, R1 
			MOVC A, @A+DPTR ;PEGAR O VALOR NA TABELA
			MOV P1, A ;ESCREVER EM P1
			INC R1
			CJNE R1, #16H, ESCREVEP
			MOV R1, #00H
			JMP ESCREVEP


HANDLER: 	MOV STATE1, #01H  ;COLOCA 0h ='1'
			RETI 

HANDLER2: 	PUSH DPL ;GUARDA BYTE MENOS SIGNIFICATIVO DE DPTR NA PILHA
			PUSH DPH ;GUARDA BYTE MAIS SIGNIFICATIVO DE DPTR NA PILHA
			PUSH ACC ;GUARDA O ACUMULADOR NA PILHA
			MOV DPH, #20H ;QUEREMOS ESCREVER NA MEMÓRIA EXTERNA DE 2000H ATÉ 200FH
			MOV DPL, R2 ;BYTE MENOS SIGNIFICATIVO EM DPL PARA COMPLETAR O DPTR E APONTAR PARA POSIÇÃO DE MEM DESEJADA
			MOV A, P1 ;PEGAR P1 PARA ESCREVER NA POSIÇÃO DE MEMÓRIA
			MOVX @DPTR, A ;ESCREVER NA POSIÇÃO APONTADA POR DPTR "20R2"
			INC R2 
			CJNE R2, #0FH, FIM
			MOV R2, #00H
FIM:		POP ACC ;RECEBER O VALOR ANTERIOR DO ACUMULADOR
			POP DPH ;RECEBER O VALOR ANTERIOR DE DPL BYTE MAIS SIGNIFICATIVO DE DPTR
			POP DPL ;RECEBER O VALOR ANTERIOR DE DPH BYTE MENOS SIGNIFICATIVO DE DPTR
			RETI


TABELA:		DB 'Microcontrolador'
			END
;			M  i  c  r  o  c  o  n  t  r  o  l  a  d  o  r  -> referência
;			4D 69 63 72 6F 63 6F 6E 74 72 6F 6C 61 64 6F 72 -> hexadecimal		 
;INTERRUPÇÃO EXTERNA PORTA 3 -> P3.2 INT0 P3.3 INT1		